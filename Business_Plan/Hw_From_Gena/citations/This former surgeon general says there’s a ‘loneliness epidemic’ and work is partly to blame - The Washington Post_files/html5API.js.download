(function(k){function D(a,b,c){function e(a){k.FT.$(document).off(d,e);a=/error$/i.test(a.type)?c:b;"function"===typeof a&&a()}for(var f,d="fullscreenerror mozfullscreenerror webkitfullscreenerror MSFullscreenError fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",h=a.requestFullscreen,n=["ms","moz","webkit"];!h&&(f=n.pop());)h=a[f+"RequestFullscreen"]||a[f+"RequestFullScreen"]||a[f+"EnterFullscreen"];h?(k.FT.$(document).on(d,e),h.call(a)):"function"===typeof c&&c()}
function B(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function J(a){function b(){B()||(k.FT.$(document).off(c,b),a.contract())}var c="fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange";k.FT.$(document).on(c,b)}function E(a,b){function c(a){var c=b.video,n=k.querySelector(".ft-video-progress-bar"),l=Date.now();a=Math.max(0,Math.min(n.offsetWidth,(a.touches?a.touches[0]:a).pageX-n.getBoundingClientRect().left));
300>l-m||(m=l,c.duration?c.currentTime=a/n.offsetWidth*c.duration:c.seekToPoint&&c.seekToPoint(a/n.offsetWidth))}function e(a){var n="IFRAME"!==a.target.tagName?a.target.ownerDocument:a.target.contentWindow.document;p=!1;document.body.removeEventListener("mousemove",c);document.body.removeEventListener("touchmove",c);["mouseleave","mouseup","touchend","touchcancel"].forEach(function(a){n.removeEventListener(a,e,!0)});t&&b.video.play()}function f(a){var c=a.target,n=b.video,m=n.currentTime;switch(a.type){case "progress":if(!a.detail&&
!n.buffered.length)break;a=a.detail&&a.detail.cvLoadRatio||n.buffered.end(0)/n.duration;v.children[0].style.width=100*a+"%";break;case "timeupdate":case "durationchange":v.children[1].style.width=100*(a.detail&&a.detail.hasOwnProperty("cvPlayRatio")?a.detail.cvPlayRatio:m/c.duration)+"%";u.textContent=~~(m/60)+":"+("0"+~~(m%60)).slice(-2);break;case "playing":d();case "volumechange":z.textContent=n.muted?"G":"F";case "pause":p||(w.textContent=n.paused?"D":"E");break;case "ended":d()}}function d(a){var c=
k.getBoundingClientRect(),m=b.video;a=!m.paused&&(!a||"touchstart"!==a.type&&(a.pageX<=c.left||a.pageX>=c.right||a.pageY<=c.top||a.pageY>=c.bottom));w.textContent=m.paused?"D":"E";z.textContent=m.muted?"G":"F";k.className=k.className.replace(/\s*hidden\s*/,"");clearTimeout(n);a&&(n=setTimeout(function(){k.className+=" hidden"},4E3))}var h,n,m,l=b.videoElement,q=b.settings.parent,p=!1,t;h=/iP(ad|od|hone)/.test(navigator.userAgent);var x=b.settings.autoplay,k=a.appendChild(F.cloneNode(!0)),s="timeupdate durationchange volumechange pause playing ended progress".split(" "),
r=["mousemove","mouseout","touchstart","touchend"],w=k.children[0],v=k.children[1].children[0],u=k.children[2],z=k.children[3],G=k.children[4];h&&!x&&(F.childNodes[3].style.display="none");w.textContent=b.video.paused?"D":"E";z.textContent=b.settings.muted?"G":"F";k.onselectstart=function(){return!1};for(h=s.length;h--;)q.addEventListener(s[h],f,!0);for(h=r.length;h--;)a.addEventListener(r[h],d),q.addEventListener(r[h],d);l.buffered&&l.buffered.length&&(v.children[0].style.width=l.buffered.end(0)/
l.duration*100+"%");q.addEventListener("emptied",function(){var a=b.video;v.children[0].style.width=v.children[1].style.width=0;u.textContent="0:00";z.textContent=a.muted?"G":"F";w.textContent=a.paused?"D":"E"},!0);k.onclick=function(a){var c=b.video,n=a.target;a.stopPropagation();switch(n.className){case "ft-icon-play":c[c.paused?"play":"pause"]();break;case "ft-icon-volume":c.muted^=1;break;case "ft-icon-fullscreen":a=b.isFullscreen(),b[a?"leaveFullscreen":"goFullscreen"](),G.textContent=G?"B":
"C"}};k.onmousedown=k.ontouchstart=function(a){var n=a.target,m=["mouseleave","mouseup","touchend","touchcancel"];a.stopPropagation();if(!p)switch(n.className){case "ft-video-buffer":case "ft-video-progress":n=n.parentNode;case "ft-video-progress-bar":a.preventDefault(),p=!0,t=!b.video.paused,b.video.pause(),document.body.addEventListener("mousemove",c),document.body.addEventListener("touchmove",c),m.forEach(function(a){n.ownerDocument.addEventListener(a,e,!0)}),c(a)}};d()}function L(a){var b,c=document.body.appendChild(document.createElement("span"));
c.textContent="ABCDEFG";c.style.cssText="position: absolute; z-index: 10000; left:-999px;";b=c.offsetWidth;c.style.fontFamily="ftglyphs";setTimeout(function f(){if(c.offsetWidth!==b)return c.parentNode.removeChild(c),a(!0);setTimeout(f,100)},200)}function C(a){var b=a.myFT,c=a.settings,e=c.video,f=function(){C(a)},g=function(a){for(var b=a.length;b--;)if(a[b].name===e)return a[b].ref},h=/^(https?:|\/\/).*?\byoutu\.?be\b/;if(b.getManifest("filename")&&!a.filepath){var n=b.getManifest("instantAds"),
m=b.getManifest("videos"),l=n?n.length:null,q=function(){var b=c.controlsParent||a.container,n=b&&b.querySelector(".ft-video-controls");n?n.style.display=a.ytVideo?"none":"":a.ytVideo||!c.controls||!c.forceAutoplay&&/^iPhone|iPod$/.test(navigator.platform)||(M?E(b,a):L(function(){E(b,a)}))};if(n){if(!b.instantAdsLoaded)return b.addEventListener("instantads",f);for(f=function(a,b){for(var c=a.length;c--;)if(a[c].name===b)return a[c]}(m,e);l--;)if(f&&n[l].name===e&&"video"===n[l].type.toLowerCase()||
"text"===n[l].type.toLowerCase()&&h.test(f.ref)){if(f.name===e&&!h.test(f.ref)){b.get("adPreview")&&(a.absoluteURL=b.instantAds[e]);a.filepath=b.instantAds[e]||f.ref;a.loadVid();q();return}if(f.name===e&&h.test(f.ref)){a.filepath=h.test(b.instantAds[e])?b.instantAds[e]:f.ref;a.loadYouTubeVid(e,c,!0);return}}else b.error("applyVideo","Instant video name '"+e+"' has no matching item in the Video component of the manifest")}if(!n||b.instantAdsLoaded&&!a.filepath)a.filepath=g(m),h.test(a.filepath)?a.loadYouTubeVid(e,
c,!1):a.loadVid(),q()}else d.addEventListener("manifest",f),a.filepath||b.addEventListener("instantads",f)}function A(a,b){var c=a.settings.actionQueue||[];c.push(b);a.settings.actionQueue||(a.settings.actionQueue=c)}function N(a){var b=function(){d.$(document).off(H,b);a.play()};a.video.paused||a.ytVideo&&2===a.video.getPlayerState()||(a.pause(),d.$(document).on(H,b))}var I=d,O=1,d=k.FT=function(){var a=this,b;d.makeDispatcher(this);a.version=2.8;a.placementProperties={};a.manifestProperties={};
a.firedStandardEvents={};a.hasLoaded=!1;a.testMode=!1;a.notTop=k!==k.top;a.politeloadFired=!1;a.adsLinked=!1;k!==k.top&&-1===location.search.indexOf("test")||d.preventFTTestMode?d.addListener(k,"message",function(b){a.receiveMessages(b)}):a.testMode=!0;a.addEventListener("politeload",function(){a.politeloadFired=!0});try{if(a.testMode){if(a.placementProperties=d.testing.call(a,{clickTagCount:20}),k.matchMedia){var c=matchMedia("(orientation: portrait)"),e=function(){var b=this.matches?0:90;setTimeout(function(){a.dispatchEvent("orientationchange",
{orientation:b,width:k.innerWidth,height:k.innerHeight,scale:k.innerWidth/document.documentElement.clientWidth})})}.bind(c);c.addListener?c.addListener(e):d.addListener(k,"resize",e);e(c)}}else a.placementProperties=JSON.parse(k.name);k.name=""}catch(f){}try{a.placementProperties.guid=k.localStorage.ftGUID||a.placementProperties.guid}catch(g){a.placementProperties.guid=a.placementProperties.guid}a.addEventListener("orientationchange",function(b){a.placementProperties.orientation=b.orientation;a.placementProperties.maxWidth=
b.width;a.placementProperties.maxHeight=b.height;a.placementProperties.scale=b.scale});a.addEventListener("statechange",function(b){a.placementProperties.state=b});a.addEventListener("viewablechange",function(b){a.placementProperties.isViewable=b});a.addEventListener("maxsizechange",function(b){a.placementProperties.maxWidth=b.width||a.placementProperties.maxWidth;a.placementProperties.maxHeight=b.height||a.placementProperties.maxHeight});a.addEventListener("sizechange",function(b){a.placementProperties.currentWidth=
b.width;a.placementProperties.currentHeight=b.height});a.placementProperties.currentWidth=a.placementProperties.currentWidth||k.innerWidth||document.documentElement.clientWidth;a.placementProperties.currentHeight=a.placementProperties.currentHeight||k.innerHeight||document.documentElement.clientHeight;if(!0===a.get("testInAdserverMode")||/^https?:\/\/www\.flashtalking\.net\/uploads\//i.test(location.href))a.tia=!0;d.addListener(k,"click",function(b){a.clickManager.call(a,b)},!1);d.$(k).on("pointerdown MSPointerDown touchstart",
function(b){a.send("interaction")});d.listen(k,"resize",function(b){a.dispatchEvent("sizechange",{width:k.innerWidth||document.documentElement.clientWidth,height:k.innerHeight||document.documentElement.clientHeight})});"loading"!==document.readyState?(a.dispatchEvent("DOMLoaded"),"complete"===document.readyState||"loaded"===document.readyState?a.dispatchEvent("load"):d.addListener(k,"load",function(b){a.dispatchEvent("load",b)})):d.addListener(document,"readystatechange",function(){"interactive"===
document.readyState?a.dispatchEvent("DOMLoaded"):a.dispatchEvent("load")});for(b in d.initialisation)d.initialisation[b].call(this);d.addEventListener("manifest",function(b){var c={version:a.version,location:location.href,guid:a.get("guid")||!1};a.manifestProperties=b;a.testMode?(b={method:"init",msg:d.testing.call(a,b)},a.receiveMessages({data:JSON.stringify(b)})):a.send("ready",c)});this.defaultCSS='body{margin: 0; padding: 0;}ft-richload, richload{display:block;position:relative;margin:0;padding:0;border:0;}.ft-video, .ft-video *{-webkit-tap-highlight-color:rgba(0, 0, 0, 0);}.ft-video{display:inline-block;}.ft-video img,.ft-video video,.ft-video iframe,.ft-video canvas{width:inherit;height:inherit;max-width:inherit;max-height:inherit;min-width:100%;min-height:100%;}@font-face{font-family:"ftglyphs";src:url("${baseURL}/fonts/ftglyphs.eot");src:url("${baseURL}/fonts/ftglyphs.eot?") format("eot"), url("${baseURL}/fonts/ftglyphs.woff") format("woff"), url("${baseURL}/fonts/ftglyphs.svg") format("svg");}[class^="ft-icon-"]{font-style:normal;font-weight:normal;font-variant:normal;text-transform:none;padding:0 3px;height:20px;min-width:24px;line-height:20px;cursor:default;-ms-user-select:none;-webkit-user-select:none;-moz-user-select:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}.ft-video{position:relative;display:inline-block;}.ft-video iframe{border:none;}.ft-video-controls{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;color:#fff;speak:none;font-family:ftglyphs;box-sizing:border-box;background-color:rgba(0, 0, 0, 0.7);font-size:18px;display:table;position:absolute;bottom:10px;left:2%;width:96%;height:26px;margin:0 auto;padding:0 2px;border-radius:4px;transition:all 200ms;text-align:center;-webkit-transition:all 200ms;-moz-transition:all 200ms;}.ft-video-controls *{font-family:ftglyphs;}.ft-video-controls.hidden{opacity:0;bottom:0;}[class^="ft-icon-"], .ft-video-progress-container, .ft-time-display{display:table-cell;vertical-align:middle;width:24px;padding:5px 2px;}.ft-video-progress-container{width:100%;}.ft-video-progress-bar{overflow:hidden;display:block;position:relative;box-sizing:border-box;border:2px solid white;border-radius:8px;width:100%;height:12px;}.ft-video-progress-bar::after{position: absolute;top:0;left:0;right:0;bottom:0;box-shadow:inset 0 0 4px black;border-radius:8px;content:"";}.ft-video-progress,.ft-video-buffer{position:absolute;top:0px;bottom:0px;left:0px;background-color:#fff;}.ft-video-buffer{background-color:rgba(255, 255, 255, 0.4);}.ft-time-display{line-height:1.7em;font-size:0.7em;width:50px;padding:5px 5px;}[class^="ft-share-"]{font-family:ftglyphs;size:20px;}[class^="ft-share-twitter"]{color:#55acee;}[class^="ft-share-facebook"]{color:#3b579d;}.ft-share-twitter:before{content: "Z";}.ft-share-twitter-square:before{content: "Y";}.ft-share-facebook:before{content: "X";}.ft-share-facebook-square:before{content: "W";}';
d.insertCSS(document,this.defaultCSS);d.include("manifest.js")};I&&(d.__proto__=I);(function(a){function b(a){setTimeout(function(){var b=n(a),m=b?a[0]:a,b=b?a[1]:a,d,p;if(g.hasOwnProperty(m)||f.hasOwnProperty(m))return c();l.hasOwnProperty(m)&&(b=q+[m,l[m],m+".js"].join("/"),/https?:/.test(location.protocol)||(b="http:"+b));/\.js/.test(b)||/^(http|\/\/)/.test(b)||(b=b.replace(".","/")+".js");/.+!(.*?$)/.test(b)&&(p="__asyncs__"+Date.now(),d=b.match(/.+!(.*?$)/)[1]);e(m,b,d,p)})}function c(){for(var a,
b,c,l,e,d=h.length,q=function(a,b){b=n(a)?a[0]:a;f.hasOwnProperty(b)&&e.push(f[b])};d--;)a=h[d],b=a[0],c=a[1],l=a[2],e=[],m(c,q),c.length&&c.length!==e.length||(h.splice(d,1),d=h.length,l="function"===typeof l?l.apply(this,e):l,a.push(!0),null!==b&&(f[b]=l))}function e(a,b,n,m){if(!a||!document.querySelector('script[data-module="'+a.replace(/"/g,'\\"')+'"]')){var l=document.createElement("script"),e=function(){if(!this.readyState||/^(?:loaded|complete)$/.test(this.readyState))l.onload=l.onreadystatechange=
null,l.parentNode&&l.parentNode.removeChild(l),g.hasOwnProperty(a)||(f[a]=void 0,c())};m?(d[m]=e,b=b.replace("!"+n,(0>b.indexOf("?")?"?":"&")+n+"=FT."+m)):l.onload=l.onreadystatechange=e;l.async=!0;l.src=b;l.setAttribute("data-module",a.replace("!"+String(n),""));p.appendChild(l)}}var f={},g={},h=[],n=Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)},m=function(a,b){for(var c=0,n=a.length;c<n&&!1!==b(a[c],c,a);c++);},l={canvasvideo:"1/3",carousel:"1/1",photoinput:"1/0",storelocator:"2/0",
subloader:"1/1",touch:"1/1",transform:"1/1",maps:"2/0"},q="//cdn.flashtalking.com/frameworks/js/",p=document.head||document.querySelector("head");d.require=d.define=function(a,m,e){"string"!==typeof a&&(e=m,m=a,a=null);n(m)||(e=m,m=[]);l.hasOwnProperty(String(a).toLowerCase())&&(a=String(a).toLowerCase());a&&(g[a]=!0);h.unshift([a,m,e]);c();if(m.length)for(e=0;e<m.length;e++)a=String(n(m[e])?m[e][0]:m[e]).toLowerCase(),l.hasOwnProperty(a)&&(m[e]=a),b(m[e])};a.define||a.require||(a.require=a.define=
d.require=d.define)})(this);d.query=function(a){var b=null;return b=a.match(/#[a-z0-9_\-]+$/i)?document.querySelector(a):document.querySelectorAll(a)};d.include=function(a,b){d.require([a],b)};d.addListener=function(a,b,c){a.on||(a=d.$(a));a.on(b,c)};d.listen=d.addListener;d.removeListener=function(a,b,c){a.on||(a=d.$(a));a.off(b,c)};d.manifest=function(a){d.dispatchEvent("manifest",a)};d.initialisation={};d.ajaxDefaults={async:!0,method:"GET",context:k,complete:function(){},params:null,test:function(){}};
d.ajax=function(a,b){var c,e,f=new XMLHttpRequest,g=k.FT.ajaxDefaults;e=document.createElement("a");var h=/([\w%]+)=\[%CALLBACK%]/,n=function(a){var c=d.query("head")[0],n=document.createElement("script"),e="FT_jsonpCallback_1_"+O++;a=a.replace(h,"$1="+e);n.setAttribute("src",a);n.onerror=function(){b.complete.call(this,{status:400,responseText:""})};k[e]=function(a){b.complete.call(this,{status:200,responseText:JSON.stringify(a)});delete k[e]};c.appendChild(n)};e.href=a;e.href=e.href;e=e.protocol!==
location.protocol||e.hostname!==location.hostname||e.port!==location.port&&"80"!==e.port+location.port;for(c in g)b[c]=b[c]||g[c];-1<a.indexOf("ftCreds=1")&&(b.withCredentials=!0);if(e&&!(b&&b.withCredentials||"withCredentials"in f)&&k.hasOwnProperty("XDomainRequest"))f=new k.XDomainRequest,f.onprogress=function(){},f.ontimeout=f.onerror=function(){f.status=400;f.readyState=4;f.onreadystatechange()},f.onload=f.ontimeout=f.onerror=function(){f.status=200;f.readyState=4;f.onreadystatechange()};else if(b&&
b.withCredentials)if("withCredentials"in f)f.withCredentials=!0;else if(h.test(a)){n(a);return}a=a.replace(h,"");f.onreadystatechange=function(a){4===f.readyState&&b.complete.call(b.context,f,a,b.params)};if(!0!==b.context.testMode){f.open(b.method,a,b.async);for(c in b.headers)f.setRequestHeader(c,b.headers[c]);f.send()}else b.test.call(b.context,b.params)};d.getAbsLeft=function(a){for(var b=a.offsetLeft;a.offsetParent;)a=a.offsetParent,b+=a.offsetLeft;return b};d.getAbsTop=function(a){for(var b=
a.offsetTop;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop;return b};"undefined"===typeof console&&(k.console={log:function(){}});d.insertCSS=function(a,b){var c=a.createElement("style"),e=("https:"===location.protocol?"https:":"http:")+"//cdn.flashtalking.com/frameworks/js",f=a.head||a.getElementsByTagName("head")[0]||a.createElement("head");b=b.replace(/\${baseURL}/g,e);"textContent"in c&&(c.textContent=b);f.insertBefore(c,f.children[0]||null);f.parentNode||a.documentElement.insertBefore(f,document.body);
a===document&&(d.styleSheet=c.sheet||c.styleSheet);"textContent"in c||(c.styleSheet.cssText=b.replace(/\${baseURL}/g,e))};(function(a){function b(a,b,c,e){var d=(e?"remove":"add")+"EventListener",f="",g=b.split(" "),h=a.length;b=b.length;!a[0]||d in a[0]||(d=e?"detachEvent":"attachEvent",f="on");for(;h--;)for(e=0;e<b;e++)if(d in a[h])a[h][d](f+g[e],c)}function c(a,b,c){var e,d="last"===c?"appendChild":"insertBefore";b instanceof g||(b=new g(b));a instanceof g||(a=new g(a));e=b.length;if(0<e){var f=
a;a=document.createDocumentFragment();for(var h=0,k=f.length;h<k;h++)a.appendChild(f[h]);for(;e--;)b[e]&&"object"===typeof b[e]&&(f="last"===c||"first"===c?b[e]:b[e].parentNode,h="after"===c?b[e].nextSibling:"first"===c?b[e].childNodes[0]:b[e],what=0===e?a:a.cloneNode(!0),f[d](what,h))}}function e(a,b){for(;a&&(a=a[b+"Sibling"]);)if(1===a.nodeType)return a}var d="undefined"!==typeof document.body.classList,g=function(a,b){if(!(this instanceof g))return new g(a,b);var c,e;this.length=0;if("string"===
typeof a)if(/<[^>]+>/.test(a)){c=document.createElement("div");e=document.createDocumentFragment();for(c.innerHTML=a;c.childNodes.length;)e.appendChild(c.childNodes[0]);e=e.childNodes}else e=(b||k).document.querySelectorAll(a);if(e&&e.length)for(c=e.length;c--;)1===e[c].nodeType&&Array.prototype.unshift.call(this,e[c]);else a&&(this[0]=a,this.length=1);return this},h=function(a,b){var c;try{return c=RegExp("(^| )"+a+"($| )"),c.test(b)}catch(e){return!1}};k.FT.$=g;g.prototype.splice=function(a,b){var c=
[],e=a,d,f;d=void 0===b?this.length-a:b;if("number"===typeof d){for(;d--;)c.push(this[e++]);for(e=a;this[e];)this[e+b]?this[e]=this[e+b]:delete this[e],e++;this.length-=b;return c}if(b.length&&"object"===typeof b){f=b.length;for(d=0;d<f;d++)c.push(this[e]),this[e++]=b[d];for(d=0;d++<c.length;)this[e]&&c.push(this[e]),this[e]=c[d-1],e++;this.length+=f;return this}};g.prototype.next=function(){var a=this[0].nextElementSibling||e(this[0],"next");return k.FT.$(a)};g.prototype.previous=function(){var a=
this[0].nextElementSibling||e(this[0],"previous");return k.FT.$(a)};g.prototype.parent=function(){return k.FT.$(this[0].parentNode)};g.prototype.first=function(){return new g(this[0])};g.prototype.last=function(){return new g(this[this.length-1])};g.prototype.eq=function(a){return new g(this[a])};g.prototype.each=function(a){for(var b=0,c=this.length;b<c;b++)a.call(this[b],b,this[b]);return this};g.prototype.filter=function(a){for(var b=new g,c=0,e=this.length;c<e;c++)a.call(this[c],c,this[c])&&Array.prototype.push.call(b,
this[c]);return b};g.prototype.alignTo=function(b){b=b instanceof g?b:a.$(b);if(!b.length)return this;for(var c=0;c<this.length;c++)1<b.length&&b.length?(this[c].style.left=b.x(b[c])+"px",this[c].style.top=b.y(b[c])+"px"):1===b.length&&(this[c].style.left=b.x(b[c])+"px",this[c].style.top=b.y(b[c])+"px");return this};g.prototype.getAbsLeft=k.FT.getAbsLeft;g.prototype.getAbsTop=k.FT.getAbsTop;g.prototype.x=function(a){a?"number"===typeof a&&this[a]&&(a=this[a]):a=this[0];return this.getAbsLeft(a)};
g.prototype.y=function(a){a?"number"===typeof a&&this[a]&&(a=this[a]):a=this[0];return this.getAbsTop(a)};g.prototype.width=function(){return this[0]&&"object"===typeof this[0]&&this[0].offsetWidth||0};g.prototype.height=function(){return this[0]&&"object"===typeof this[0]&&this[0].offsetHeight||0};g.prototype.children=function(){var b=[],c,e,d;for(c=0;c<this.length;c++)if(1===this.length)b=this[0].children;else for(theseChildren=this[c].children,d=theseChildren.length,e=0;e<d;e++)b.push(theseChildren[e]);
return a.$(b)};g.prototype.addClass=function(a){var b=[],c="",e=0,p;a=a.split(" ");for(e=0;e<this.length;e++){p=a.length;for(c=this[e].className;p--;)d?this[e].classList.add(a[p]):h(a[p],c)||b.push(a[p]);!d&&b&&(this[e].className=c+(""!==c?" ":"")+b.join(" "))}return this};g.prototype.removeClass=function(a){var b=this.length,c;for(a="string"===typeof a?a.split(" "):a;b--;)for(c=a.length;c--;)if(d)this[b].classList.remove(a[c]);else if(h(a[c],this[b].className)){var e=this[b],p;p=this[b].className.replace(a[c],
"").replace(/(^ | $)/g).replace(/  /g," ");e.className=p}return this};g.prototype.hasClass=function(a){var b=this.length,c;for(a=a.split(" ");b--;)for(c=a.length;c--;)if(d&&!this[b].classList.contains(a[c])||!h(a[c],this[b].className))return!1;return!0};g.prototype.clone=function(){for(var a=new g,b=this.length;b--;)a[b]=this[b]&&"object"===typeof this[b]&&this[b].cloneNode?this[b].cloneNode(!0):this[b];return a};g.prototype.data=function(a,b){var c="data-"+a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),
e=this[0]&&"object"===typeof this[0]&&this[0].getAttribute;if(b)for(var d=this.length;d--;)e&&this[d].setAttribute(c,b);else return e&&this[0].getAttribute(c)||"";return this};g.prototype.on=function(a,c){b(this,a,c);return this};g.prototype.off=function(a,c){b(this,a,c,!0);return this};g.prototype.prepend=function(a){c(a,this,"first");return this};g.prototype.prependTo=function(a){c(this,a,"first");return this};g.prototype.append=function(a){c(a,this,"last");return this};g.prototype.appendTo=function(a){c(this,
a,"last");return this};g.prototype.before=function(a){c(a,this,"before");return this};g.prototype.after=function(a){c(a,this,"after");return this};g.prototype.remove=function(){for(var a=this.length;a--;)this[a]&&this[a].parentNode&&this[a].parentNode.removeChild(this[a]);return this};g.prototype.empty=function(){for(var a=this.length;a--;)this[a]&&"object"===typeof this[a]&&this[a].childNodes&&(this[a].innerHTML="");return this};g.prototype.css=function(a,b){if(this[0])if("string"!==typeof a||b){var c=
this.length,e=b?{}:a;for(b&&(e[a]=b);c--;)for(var d in e)this[c]&&(this[c].style[d]=e[d])}else return a=a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()}),k.getComputedStyle?getComputedStyle(this[0])[a]:this[0].currentStyle[a];else return"";return this}})(d);d.prototype.receiveMessages=function(a){var b={method:"",msg:""},c=[];try{b=JSON.parse(a.data)}catch(e){}if("init"!==b.method||this.hasLoaded)this[b.method]&&this.hasLoaded&&(c=b.msg?"Array"===b.msg.constructor.name?b.msg:[b.msg]:null,
this[b.method].apply(this,c));else{this.hasLoaded=!0;for(var d in b.msg)this.placementProperties[d]=b.msg[d];b.msg.newGUID&&!this.get("adPreview")&&this.newGUID();this.dispatchEvent("ready",b)}};d.prototype.dispatch=function(a){this.dispatchEvent(a.ev||a,a.msg)};d.prototype.send=function(a,b){var c={method:a,msg:b};if(this.get("safeFrame"))try{k.parent["ft"+this.get("pID")].receive({data:JSON.stringify(c),origin:"http://cdn.flashtalking.com",source:k,currentTarget:k.parent,srcElement:k.parent,target:k.parent,
timeStamp:(new Date).getTime(),type:"message"})}catch(e){this.error("send trying to access parent window but not on same domain, port and protocol")}else this.notTop&&k.parent.postMessage(JSON.stringify(c),"*")};d.prototype.get=function(a){var b="";"undefined"!==typeof this.placementProperties[a]&&(b=this.placementProperties[a]);return b};d.prototype.getManifest=function(a){var b="";"undefined"!==typeof this.manifestProperties[a]&&(b=this.manifestProperties[a]);return b};d.prototype.checkLoaded=function(){return this.hasLoaded};
d.prototype.tracker=function(a,b,c){for(var e=this.manifestProperties.trackingEvents||[],d=e.length,g=null;d--;)if(a===e[d].name){g=101+d;if("standard"===e[d].type){if(this.firedStandardEvents[g])return;this.firedStandardEvents[g]=!0}else"string"===e[d].type&&2===arguments.length&&(c=b,b=0);break}g&&this.send("tracker",{type:"custom",num:g,value:b,string:c})};d.prototype.clickManager=function(a){this.send("tracker",{type:"clickmap",x:a.pageX,y:a.pageY})};d.prototype.getClickTag=function(a,b){function c(a,
b){return RegExp((a?"^":"")+"(http|https|mailto|sms|smsto|tel|facetime|market|spotify|fb|twitter|googlechrome|googlechromes|mopubnativebrowser)(:|%3A|%253A|%25253A)",b||"")}var e="clickTag"+(a||""),d=document.createElement("a"),g=this.get("clicks"),h="",h={urlCustom:b||"",clickSuf:this.get("ftClickSuf"),escapeIterations:parseInt(this.get("ftEscapeMod"),10)||0,clickTag:e},n=function(a){var b=a.escapeIterations;if(a.clickSuf)switch(a.urlCustom.charAt(a.urlCustom.length-1)){case "?":case "&":break;default:-1!=
a.urlCustom.indexOf("?")?a.clickSuf="&"+a.clickSuf:a.clickSuf="?"+a.clickSuf}for(;b--;)a.urlCustom=encodeURIComponent(a.urlCustom),a.clickSuf=encodeURIComponent(a.clickSuf);return a};if(this.hasLoaded){if(b){d.href=b;if(c(!0).test(d.protocol)&&"http"!==d.protocol.slice(0,4)&&(this.tia||this.testMode||this.get("adPreview")))return b;if("function"==typeof k.customSAClick){var d=k.customSAClick(h),m;for(m in d)h[m]=d[m]}if(c(!0).test(h.urlCustom))if(h=n(h),b=h.urlCustom+h.clickSuf,this.tia||this.testMode||
this.get("adPreview"))h=g[e]+"&APPEND=false&DYNCTTEST="+b;else if(e=g[h.clickTag].split("?"),g=/(&|%26|%2526)url(=|%3D|%253D)\d+/,h=e[0],e[1]=e.slice(1).join("?"),g.test(e[1]))h+="?"+e[1].replace(g,"$1url$2"+b);else{var l;e[1].replace(c(!1,"g"),function(a,b,c,e){l=e});h+="?"+e[1].slice(0,l)+b}else h=this.tia||this.testMode||this.get("adPreview")?g[e]+"&APPEND=true&DYNCTTEST="+b:g[e]+b}else h=g[e];return h}this.error("getClickTag","get ClickTag was called before the myFT.hasLoaded == true")};d.prototype.clickTag=
function(a,b){if(!this.hasLoaded)return this.error("clickTag","clickTag method called before hasLoaded === true");var c=this.getClickTag(a,b);this.send("interactionComplete");this.send("clickthrough",{clickTag:a||1,url:c});if("ext"===this.get("api"))this.send("open",c);else{var e=/((sms|tel|mailto|spotify|facetime):|https?:\/\/maps\.)/i.test(c)&&/ip(ad|hone|od)/i.test(navigator.userAgent)?"_top":"_blank";k.open(c,e)}};d.prototype.applyClickTag=function(a,b,c){a instanceof d.$||(a=d.$(a));var e=this,
f=function(a){e.clickTag(b,c);e.clickManager(a);a.stopPropagation?a.stopPropagation():"undefined"!==typeof a.cancelBubble&&(a.cancelBubble=!0)};e.hasLoaded?(a.css("cursor","pointer"),a.on("click",f)):e.addEventListener("ready",function(){e.applyClickTag(a,b,c)})};d.prototype.applyButton=function(a,b){a instanceof d.$||(a=d.$(a));var c=this,e=function(a){c.clickManager(a);a.stopPropagation?a.stopPropagation():"undefined"!==typeof a.cancelBubble&&(a.cancelBubble=!0);b.call(c,a)};c.hasLoaded?(a.on("click",
e),a.css("cursor","pointer")):c.addEventListener("ready",function(e){c.applyButton(a,b)})};d.prototype.absorbSwipes=function(a){var b=document.body.style,c="touchAction"in b?"touchAction":"msTouchAction",e=function(a){a.preventDefault&&a.preventDefault()};this.send("preventSwipes",!!a);!this.absorbSwipesSet&&a?(d.addListener(k,"touchmove",e),c in b&&(b[c]="none")):a||(d.removeListener(k,"touchmove",e),c in b&&(b[c]=""))};d.prototype.newGUID=function(){var a,b=this.replaceMacros(this.get("iDeviceImp"))||
"//servedby.flashtalking.com/imp/"+this.get("campaignID")+";"+this.get("pID")+";207;guid;"+this.get("siteName")+";"+this.get("placementDescription")+"/?ft_guid="+this.get("guid")+"&cachebuster="+1E9*~~Math.random();this.testMode||this.tia||(a=document.createElement("iframe"),a.src=b.replace(/^https?:/,""),a.style.cssText="display:none",document.body.appendChild(a));try{k.localStorage.ftGUID=this.get("guid")}catch(c){}};d.prototype.error=function(a,b){var c="ftError in method "+a+": "+b;if(!k.mocha&&
!k.sinon&&!k.chai)return this.get("api"),this.send("error",c),/\.flashtalking\./.test(document.referrer),!1};d.prototype.getMaxSize=function(){return{width:this.get("maxWidth")||0,height:this.get("maxHeight")||0}};d.prototype.getState=function(){return this.get("state")};d.prototype.replaceMacros=function(a,b){var c={regex:/\[\%ftPostal\%\]/g,value:this.get("ftPostal")},e={regex:/\[\%ftDMA\%\]/g,value:this.get("ftDMA")},d={regex:/\[\%ftLat\%\]/g,value:this.get("ftLat")},g={regex:/\[\%ftLong\%\]/g,
value:this.get("ftLng")||this.get("ftLong")},h={regex:/\[\%SERVE_DOM\%\]/g,value:this.get("serveDom")||this.get("ftServeDom")||this.get("serveDOM")||this.get("tiaServeDom")||this.testMode&&"http://cdn.flashtalking.com"},n={regex:/\[\%PROTOCOL\%\]/g,value:"http"+("https:"===location.protocol?"s":"")+"://"},m={regex:/\[\%GUID\%\]/g,value:this.get("guid")},l={regex:/\[\%FT_GUID\%\]/g,value:this.get("guid")},q={regex:/\[\%CACHEBUSTER\%\]/g,value:Math.round(1E9*Math.random())},p={regex:/\[\%FT_RANDOM\%\]/g,
value:Math.round(1E9*Math.random())},t={regex:/\[\%FT_CONFID\%\]/g,value:this.get("ftConfID")},x={regex:/\[\%FT_TIMESTAMP\%\]/g,value:this.get("ftTimestamp")},y={regex:/\[\%REQUEST_ORIGIN\%\]/g,value:k.location.host},s={regex:/\[\%PRODUCT_ID_SEGMENT\%\]/g,value:b||""},r;if(""===b)r="default";else{r=this.get("ftSegmentList");for(var w=r.length,v=RegExp("("+b+"+([0-9_A-z]+))"),u="";w--;)if(u=v.exec(r[w].s),null!==u){u=u[u.length-1];break}r=u||"default"}c=[c,e,d,g,h,n,m,l,q,p,t,x,y,s,{regex:/\[\%PRODUCT_ID\%\]/g,
value:r}];e=c.length;for(a=a||"";e--;)c[e].value&&(a=a.replace(c[e].regex,c[e].value));return a};d.prototype.isViewable=function(){return this.get("isViewable")};d.prototype.getSize=function(){return{width:this.get("currentWidth"),height:this.get("currentHeight")}};d.prototype.getOrientation=function(){return this.get("orientation")};d.prototype.destroy=function(){this.send("nuke")};d.initialisation.communicate=function(){var a=this,b=function(b){a.linkedAds[b.name]=!0;for(var e in a.linkedAds)if(!a.linkedAds[e])return;
a.adsLinked=!0;a.dispatchEvent("linkready")};d.addEventListener("manifest",function(c){if(c.communication){var e=c.communication.linked,d=e.length;for(a.linkedAds={};d--;)a.linkedAds[e[d]]=!1;a.send("communicate",{type:"register",name:c.communication.name});a.addEventListener("linkedad",b)}})};d.prototype.talk=function(a,b){var c=this;if(c.adsLinked)c.send("communicate",{type:"talk",name:a,msg:b});else c.once("linkready",function(){c.talk(a,b)})};d.prototype.communicate=function(a){var b=a.type?{type:a.type}:
null;"talk"===a.type?(b.from=a.name,b.msg=a.msg):(b.type="linkedad",b.name=a.name);this.dispatchEvent(b.type,b)};d.prototype.broadcast=function(a){for(var b=this.getManifest("communication")?this.getManifest("communication").linked:[],c=b.length||0;c--;)this.talk(b[c],a)};(function(){function a(a,b,c){f||(this.addEventListener("viewableChange",function(a){a=!1===a||"no"===a;for(var b=h.length;b--;)n[a?"off":"on"](h[b][0],h[b][1])}),f=!0);if(!c&&m[a]){if(this.isViewable())n.on(a,b);h.push([a,b])}else if(c)for(c=
h.length;c--;)b===h[c][1]&&(h.splice(c,1),n.off(a,b));else this.error("deviceorientation is not supported in this browser")}function b(a){var b=Date.now()-a.interval,c,e,d;return function(m){var f=0,l=0,h=0;m=m.accelerationIncludingGravity;f=Math.abs(c-m.x);l=Math.abs(e-m.y);h=Math.abs(d-m.z);if(f>a.threshold&&l>a.threshold||f>a.threshold&&h>a.threshold||l>a.threshold&&h>a.threshold)f=Date.now(),f-b>a.interval&&(b=f,k.dispatchEvent(q));c=m.x;e=m.y;d=m.z}}function c(a){void 0===e&&(e=a.alpha);return{alpha:g?
a.alpha:a.alpha-e,beta:a.beta,gamma:a.gamma,type:a.type,originalEvent:a,heading:g?a.webkitCompassHeading:a.alpha}}var e,f=!1,g=/iP(ad|od|hone)/.test(navigator.userAgent),h=[],n=d.$(k),m={deviceorientation:"DeviceOrientationEvent"in k,devicemotion:"DeviceMotionEvent"in k,shake:"DeviceMotionEvent"in k},l={threshold:15,interval:0},q=function(){var a;"function"===typeof document.CustomEvent?a=new document.CustomEvent("shake",{bubbles:!0,cancelable:!0}):"function"===typeof document.createEvent&&(a=document.createEvent("Event"),
a.initEvent("shake",!0,!0));return a}();d.prototype.deviceorientation=function(b,e){var d=this;this.orientationNormaliser=this.orientationNormaliser||function(a){d.dispatchEvent("deviceorientation",c(a))};a.call(this,"deviceorientation",this.orientationNormaliser,!!e)};d.prototype.devicemotion=function(b,c){a.call(this,"devicemotion",b,!!c)};d.prototype.shake=function(c,e,d){d=d||{};for(var m in l)d[m]=d[m]||l[m];a.call(this,"devicemotion",b(d));a.call(this,"shake",c,!!e)}})();d.define("_ft-elements",
function(){function a(a,b){var c=a===t,e=null,d=this.tagName.toLowerCase();if(this.hasAttribute(b[0])){if(e=this.getAttribute(b[0]),!c&&2===b.length&&String(b[1])===e)return}else if(c)return;a.apply(this,b);n.hasOwnProperty(d)&&this.attributeChangedCallback&&this.attributeChangedCallback(b[0],e,c?null:String(b[1]),null)}function b(a,b){var c=[b.target],d=x(n),m;if(b.target.tagName&&d.length){m=b.target.querySelectorAll(d.join(","));for(var d=0,f=m.length;d<f;d++)c.push(m[d]);d=0;for(f=c.length;d<
f;d++)if(m=n[(c[d].tagName||"").toLowerCase()])if(!c[d][a]&&m[a])e(c[d]);else if(c[d][a])c[d][a]()}}function c(a,b){var c=function(){return f(a)},d=y(l.prototype);a=a.toLowerCase();for(var h in b)d[h]=b[h];if(r)return r.call(document,a,{prototype:d});if(n[a])throw Error("Tried to register an element, "+a+", but it's already registered");if(-1===a.indexOf("-"))throw Error("Custom elements must have a hyphen in the tag");c.prototype=d;n[a]=d;d=(m[a]||[]).concat(s(document.getElementsByTagName(a)));
h=0;for(var g=d.length;h<g;h++)e(d[h]);delete m[a];q.call(document,a);return c}function e(a){var b=n[a.tagName.toLowerCase()];if(Object.__proto__)a.__proto__=b;else for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);"function"===typeof a.createdCallback&&a.createdCallback();"function"===typeof a.attachedCallback&&document.documentElement.contains(a)&&a.attachedCallback()}function f(a){var b=q.call(document,a);a=a.toLowerCase();"ft-"===a.slice(0,3)&&(n[a]?e(b):(m[a]||(m[a]=[]),m[a].push(b)));return b}
function g(a){return function u(){"function"===typeof this[a]&&this[a]!==u&&this[a].apply(this,arguments)}}function h(a,b,e){k[b]=c(a,{createdCallback:function(){var a=this;d.require([e],function K(){try{"function"===typeof a.createdCallback&&a.createdCallback!==K&&a.createdCallback()}finally{a.ownerDocument.contains(a)&&a.attachedCallback()}})},attachedCallback:g("attachedCallback"),detachedCallback:g("detachedCallback"),attributeChangedCallback:g("attributeChangedCallback")})}var n={},m={},l=k.HTMLElement||
k.Element,q=document.createElement,p=l.prototype.setAttribute,t=l.prototype.removeAttribute,x=Object.keys||function(a){var b,c=[];for(b in a)c.push(b);return c},y=Object.create||function(a){function b(){}b.prototype=a;return new b},s=function(a){if(Array.isArray)return Array.prototype.slice.call(a);for(var b=[];b.length!==a.length;)b.push(a[b.length]);return b},r=!1;r||((k.HTMLDocument||k.Document).prototype.createElement=f,"addEventListener"in k?(document.body.addEventListener("DOMNodeInserted",
function(a){b("attachedCallback",a)}),document.body.addEventListener("DOMNodeRemoved",function(a){b("detachedCallback",a)})):"appendChild insertBefore removeChild replaceChild".replace(/\w+/g,function(a){var c=Element.prototype[a];Element.prototype[a]=function(){var e=arguments,d=c.apply(this,e);try{"removeChild"!==a&&"replaceChild"!==a||b("detachedCallback",{target:e[1]||e[0]}),"removeChild"!==a&&b("attachedCallback",{target:e[0]})}finally{return d}}}),l.prototype.setAttribute=function(){a.call(this,
p,arguments)},l.prototype.removeAttribute=function(){a.call(this,t,arguments)});h("ft-photoinput","FTPhotoInputElement","photoinput");h("ft-map","FTMapElement","maps");return c});d.prototype.expand=function(a){var b=a&&"undefined"===typeof a.type?a:this.getManifest("expand");!a||a.type||a.customClosePosition?(this.expandProperties||a&&!a.type||this.setExpandProperties(this.getManifest("expand")),b=this.expandProperties):this.setExpandProperties(a)&&(b=this.expandProperties);if(b){if(this.getManifest("expand")||
this.getManifest("video")){var c=this;b.fullscreen&&!0!==b.nonNative&&D(document.documentElement,function(){var a=b.forceOrientation;if(a&&"none"!==a){var d=screen.orientation&&screen.orientation.lock||screen.mozLockOrientation||screen.msLockOrientation;if(d&&(a=d.call(screen.orientation||screen,a),a["catch"]))a["catch"](function(){})}J(c)});this.send("expand",b)}else this.error("expand","No expand component detailed in the manifest");this.testMode&&this.dispatchEvent("expand")}};d.prototype.resize=
function(a){var b;a&&!a.type?this.setResizeProperties(a)&&(b=this.resizeProperties):(this.resizeProperties||a||this.setResizeProperties(this.getManifest("expand")),b=this.resizeProperties);b?this.expand(b):this.error("resize","resize method not successfully executed - invalid argument or setResizeProperties not previously called")};d.prototype.contract=function(){this.absorbSwipes(!1);this.send("contract");document.body.style.margin=0;B()===document.documentElement&&["exitFullscreen","webkitExitFullscreen",
"msExitFullscreen","mozCancelFullScreen"].some(function(a){return document[a]&&(document[a](),!0)});this.testMode&&this.dispatchEvent("contract")};d.prototype.setExpandProperties=function(a){var b,c=/(width|height|offsetX|offsetY|indentDown|indentAcross)/,e=[];if(a&&"object"===typeof a){for(b in a)if(c.test(b))e.push(b);else if("fullscreen"===b&&a[b]){e.length=4;break}if(4<=e.length)return void 0===a.useCustomClose&&(a.useCustomClose=void 0===this.customClose?this.expandProperties&&void 0!==this.expandProperties.useCustomClose?
this.expandProperties.useCustomClose:!0:this.customClose),void 0!==a.offsetX&&(a.indentAcross=a.offsetX,a.indentDown=a.offsetY),this.expandProperties=a,!0;this.error("setExpandProperties","the properties object lacked the minimum requirements to set the expandProperties object {width: number, height: number, offsetX: number, offsetY: number}");return!1}this.error("setExpandProperties","the properties object was not present or not a valid object")};d.prototype.setResizeProperties=function(a){var b,
c=/(width|height|offsetX|offsetY|indentDown|indentAcross)/,e=[];if(a&&"object"===typeof a){for(b in a)c.test(b)&&e.push(b);if(4<=e.length)return a.customClosePosition||(a.customClosePosition="top-right"),"undefined"!==typeof a.offsetX&&(a.indentAcross=a.offsetX,a.indentDown=a.offsetY),this.resizeProperties=a,!0;this.error("setResizeProperties","the argument passed in lacked the minimum requirements to set the resizeProperties object {width: number, height: number, offsetX: number, offsetY: number}")}};
d.initialisation.feeds=function(){var a=this,b=function(a){var b=this.feeds,d,g;for(d in b)if(b[d].isDynamic)for(g in a)d==g&&(b[d].url=a[g]);this.dynamicFeedsPrepared=!0;this.dispatchEvent("dynamicFeedsPrepared")};d.addEventListener("manifest",function(c){if(c.feeds){var e=c.feeds,d=c.instantAds||[],g=!1;c=e.length;var h=function(b){for(var c in b)this[c]=b[c];this.isDynamic=!1;this.getUrl=function(){return a.replaceMacros(this.url,this.segment)};for(c=d.length;c--;)if(d[c].name===this.name&&"text"===
d[c].type){this.isDynamic=g=!0;break}};for(a.feeds={};c--;)a.feeds[e[c].name]=new h(e[c]);!0===g&&a.addEventListener("instantads",b)}})};d.prototype.callFeed=function(a,b){var c=this,e=c.feeds&&c.feeds[a],f=function(a){var b=d.query("head")[0],c=document.createElement("script"),f=function(){g("",!0)};c.setAttribute("src",a);k[e.method]=g;/MSIE 8/.test(navigator.userAgent)?c.onreadystatechange=function(){if(/loaded|complete/.test(c.readyState)){var a=c.readyState;"complete"==c.readyState?b.appendChild(c):
"loaded"==a&&"loading"==c.readyState&&_error()}}:(c.onerror=f,b.appendChild(c))},g=function(a,d){e.data=a;d&&(e.error=!0);"function"===typeof b&&b(e);c.dispatchEvent("feedloaded",e)};!1===c.hasLoaded?c.addEventListener("ready",function(){c.callFeed(a,b)}):e&&(e.isDynamic&&!0!==c.dynamicFeedsPrepared?c.addEventListener("dynamicFeedsPrepared",function(){c.callFeed(a,b)}):void 0===e.method?d.ajax(e.getUrl(),{context:c,complete:function(a,b){var c;try{c=JSON.parse(a.responseText)}catch(d){c=a.responseText}g(c,
400<=a.status||!a.status)}}):f(e.getUrl()))};d.initialisation.instant=function(){var a=this,b=function(b){b=a.get("adPreview");var e=a.get("testConf"),f=a.get("confID"),g="../"+a.get("creativeID")+".json",h=a.get("ftServeDom")||a.get("tiaServeDom"),n=a.get("mvt");b?g=a.get("ftURLMap")&&a.get("ftURLMap").dynamicAds:e?g=e+f:n&&(g="../mv"+f+".json");/^data/.test(g)||(g+=(0>g.indexOf("?")?"?":g.indexOf("?")===g.length-1?"":"&")+"cb="+~~(1E9*Math.random()));d.ajax(g,{context:a,complete:function(b,c){var d=
{},e;if(200===b.status){try{d=JSON.parse(b.responseText)}catch(f){}for(e in d)a.instantAds[e]=d[e].value||"","string"===typeof d[e].type&&"image"===d[e].type.toLowerCase()&&(a.instantAds[e]=a.tia||a.testMode?"../../instantAssets/"+d[e].value:h+"/"+a.get("cID")+"/instantAssets/"+d[e].value)}a.instantAdsLoaded=!0;a.dispatchEvent("instantads",a.instantAds)},test:function(){a.instantAdsLoaded=!0;a.dispatchEvent("instantads",a.instantAds)}})};a.instantAdsLoaded=!1;d.addEventListener("manifest",function(c){if(c.instantAds){var d=
c.instantAds,f=c.videos;c=c.instantAds.length;var g=0;for(a.instantAds={};c--;)if(a.instantAds[d[c].name]=d[c]["default"],"video"===d[c].type.toLowerCase())for(g=f.length;g--;)a.instantAds[d[c].name]=d[c].name===f[g].name?f[g].ref:a.instantAds[d[c].name];a.addEventListener("ready",b)}})};d.makeDispatcher=function(a){a.callbacks={};a.addEventListener=a.on=d.makeDispatcher.addEventListener;a.removeEventListener=a.off=d.makeDispatcher.removeEventListener;a.dispatchEvent=d.makeDispatcher.dispatchEvent;
a.clearEvent=d.makeDispatcher.clearEvent;a.once=d.makeDispatcher.once};d.makeDispatcher.addEventListener=d.makeDispatcher.on=function(a,b){this.callbacks[a]=this.callbacks[a]||[];this.callbacks[a].unshift(b);if(this instanceof d)switch(a){case "instantads":this.instantAdsLoaded&&b(this.instantAds);break;case "richload":this.richloadsLoaded&&b(this.richloads);break;case "load":"complete"!==document.readyState&&"loaded"!==document.readyState||b();break;case "DOMLoaded":"loading"!==document.readyState&&
b();break;case "politeload":this.politeloadFired&&b();break;case "deviceorientation":case "devicemotion":case "shake":this[a](b,!1)}};d.makeDispatcher.once=function(a,b){var c=function(){b.apply(this,arguments);this.removeEventListener(a,c)};this.addEventListener(a,c)};d.makeDispatcher.off=d.makeDispatcher.removeEventListener=function(a,b){for(var c=this.callbacks[a]||[],e=c.length;e--;)if(c[e]===b){c.splice(e,1);break}if(this instanceof d&&/device(?:motion|orientation)|shake/.test(a))this[a](b,!0)};
d.makeDispatcher.dispatchEvent=function(){var a;a=arguments;for(var b=a.length,c=[];b--;)c[b]=a[b];a=c;b=a.shift();b=this.callbacks[b]||[];for(c=b.length;c--;)b[c].apply(this,a)};d.makeDispatcher.clearEvent=function(a){delete this.callbacks[a]};d.require(["_ft-elements"],function(a){k.FTRichloadElement=k.FTRichLoadElement=a("ft-richload",{createdCallback:function(){}})});d.initialisation.richLoad=d.initialisation.richload=function(){var a=this,b=[],c=function(){var b,c,l=a.richloads;c=null;var q=
a.get("serveDOM"),p;for(p in l)if(!0!==l[p].used){if(c=document.querySelector("#"+p),"dynamic"===l[p].type&&(l[p].src=this.instantAds&&this.instantAds[p]?this.instantAds[p]:l[p].src),c&&/richload/i.test(c.tagName)){b=a.tia||a.testMode?"../../richLoads/"+l[p].src:a.placementProperties.adPreview?"../richloads/"+l[p].src:q+"/"+a.get("cID")+"/"+l[p].src;/\.html$/i.test(b)||(b+=("/"===b[b.length-1]?"":"/")+"index.html");l[p].used=!0;var t=void 0;k.attachEvent&&!k.addEventListener&&(t=document.createElement("div"),
t.id=c.id,t.className=c.className,t.style.cssText=c.style.cssText,c.replaceNode(t),c=document.querySelector("#"+c.id));l[p].frame.src=b;l[p].frame.name=p;l[p].loaded=!1;c.appendChild(l[p].frame);e(p,l[p].frame.contentWindow);l[p].frame.contentWindow.myFT=this;l[p].frame.contentWindow.FT=new d.Instance;l[p].frame.contentWindow.FT.$=h(l[p].frame.contentWindow);l[p].frame.contentWindow.FT.query=g(l[p].frame.contentWindow);f(p)}}else a.error("initialisation.richload","Richload "+p+" already used")},e=
function(b,c){var e={},f=a.richloads;d.addListener(c,"load",function(){a.richloads[b].loaded=!0;var h,g=0,k=0;for(h in f)g++,f[h].loaded?(e[h]=f[h].loaded,k++):e[h]=!1;k===g&&(a.richloadsLoaded=a.richloadsLoaded=!0);d.insertCSS(c.document,a.defaultCSS);a.richloads[b].frame.style.visibility="";a.dispatchEvent("richload",e)})},f=function(b){d.addListener(a.richloads[b].frame.contentWindow,"click",function(c){var d;d=a.richloads[b].frame;for(var e=d.offsetLeft,f=d.offsetTop;null!==d.offsetParent;)d=
d.offsetParent,e+=d.offsetLeft,f+=d.offsetTop;d={x:e,y:f};a.clickManager({pageX:d.x+c.pageX,pageY:d.y+c.pageY})})},g=function(a){return function(b){var c=null;return c=b.match(/#[a-z0-9_\-]+$/i)?a.document.querySelector(b):a.document.querySelectorAll(b)}},h=function(a){return function(b){return d.$(b,a)}};a.richloadsLoaded=a.richLoadsLoaded=!1;d.Instance=function(){};d.Instance.prototype=d;d.addEventListener("manifest",function(d){if(d.richloads||d.richLoads||d.instantAds)if(a.placementProperties.amz){var e=
document.createElement("a");e.setAttribute("id",a.placementProperties.altImgID||"");e.setAttribute("title",a.placementProperties.altText||"");e.setAttribute("href",a.placementProperties.altimghref||"");e.setAttribute("target",a.placementProperties.altImgTarget||"");e.style.zIndex=10;e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.display="block";e.style.height="100%";e.style.width="100%";e.innerHTML="<img src='"+(a.placementProperties.altImg||"")+"' alt='"+(a.placementProperties.altText||
"")+"' />";document.body.appendChild(e)}else{var f=d.richloads||d.richLoads,h=d.instantAds,g=f&&f.length||0;d=!1;for(a.richLoads=a.richloads={};g--;)if(f&&f[g]){var k=a.richloads,x=f[g].name,y=f[g].src,s;a:{for(var r=(s=h)&&s.length||0;r--;)if(s[r].name===f[g].name&&"richload"===s[r].type.toLowerCase()){d=!0;s="dynamic";break a}s="basic"}k[x]={src:y,type:s,used:!1}}for(e in a.richloads)f=document.createElement("iframe"),f.style.width="100%",f.style.height="100%",f.style.visibility="hidden",f.frameBorder=
0,f.scrolling="no",f.setAttribute("margin","0"),f.setAttribute("allowTransparency","true"),f.setAttribute("allowfullscreen",""),f.setAttribute("webkitallowfullscreen",""),f.name=e,a.richloads[e].frame=f;d?a.addEventListener("instantads",c):a.addEventListener("ready",c);for(e in b)a.insertRichload(b[e]);b=[]}});d.prototype.insertRichload=d.prototype.insertRichLoad=function(c){var k,l=c&&c.richLoad||c.richload;if("undefined"===typeof this.richloads)b.push(c);else{if(!this.richloads[l])throw Error("No richload exists in the manifest with the name "+
l);var q=this.richloads[l];if(!0===q.used)throw Error("Richload "+l+" already used");k=a.tia||!1!==a.testMode?"../../richLoads/"+q.src:a.get("serveDOM")+"/"+a.get("cID")+"/"+q.src;/\.html$/i.test(k)||(k+=("/"===k[k.length-1]?"":"/")+"index.html");q.used=!0;q.frame.src=k;q.frame.name=l;q.loaded=!1;c.parent.appendChild(q.frame);q.frame.contentWindow.myFT=this;q.frame.contentWindow.FT=new d.Instance;q.frame.contentWindow.FT.$=h(q.frame.contentWindow);q.frame.contentWindow.FT.query=g(q.frame.contentWindow);
f(l);e(l,q.frame.contentWindow);"dynamic"===q.type&&(q.src=this.instantAds&&this.instantAds[l]?this.instantAds[l]:q.src)}}};d.prototype.applyShare=function(a,b,c,e){"string"===typeof a&&(a=d.query("#"+a));a instanceof d.$||(a=d.$(a));var f;/ft-share-twitter/.test(a[0].className)&&(f="http://twitter.com/share?text="+encodeURIComponent(e)+"&url="+encodeURIComponent(c));myFT.applyClickTag(a,b,f)};d.testing=function(a){a=a.clickTagCount;for(var b=1,b=/mobile/i.test(navigator.userAgent),c={clicks:{clickTag:"http://www.flashtalking.net/helpSystem/TiA/?n=0"},
confID:"0",creativeID:"0",cID:"0",serveDOM:"",api:"ft",mvt:!1,guid:"0",newGUID:!1,newImp:"",maxWidth:b?document.documentElement.clientWidth:k.innerWidth,maxHeight:b?document.documentElement.clientHeight:k.innerHeight,isViewable:!0,state:"default"},b=1;20>=b;b++)c.clicks["clickTag"+b]="http://www.flashtalking.net/helpSystem/TiA/?n="+(b<=a?b:"error");this.dispatchEvent("politeload");return c};var H="fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",M=!1,F=function(){var a=
document.createElement("div");a.className="ft-video-controls";a.innerHTML='<span class="ft-icon-play">D</span><span class="ft-video-progress-container">  <span class="ft-video-progress-bar">    <span class="ft-video-buffer"></span>    <span class="ft-video-progress"></span>  </span></span><span class="ft-time-display">0:00</span><span class="ft-icon-volume">G</span><span class="ft-icon-fullscreen">B</span>';return a}(),P={video:"video1",preload:"metadata",poster:"",controls:!1,autoplay:!1,clickTag:!1,
muted:!1,forceAutoplay:function(){var a=navigator.userAgent,b=/iP(?:hone|ad|od)/.test(a),c=b&&!k.indexedDB&&-1===a.indexOf("Version"),d=document.createElement("canvas"),d=d.getContext&&d.getContext("webgl"),f=0<a.indexOf("Android")&&(0<a.indexOf("Chrome")||0<a.indexOf("AppleWebKit")),a=parseFloat(a.slice(a.indexOf("Android")+8));return f&&4<=a||b&&(!c||d)}()};d.Video=function(a,b){var c=this;this.video=null;this.settings=b;this.container=this.filepath=null;this.hasPlayedThrough=this.hasPlayed=!1;
this.cachedStyles={};this.ytVideo=!1;this.myFT=a;k.FT.$(document).on("fullscreenchange mozfullscreenchange webkitfullscreenchange MSFullscreenChange",function(){c.video&&c.fullscreenChange(c.isFullscreen())});k.FT.makeDispatcher(this)};d.Video.prototype.play=function(a){this.ytVideo?this.video.playVideo?this.video.playVideo():A(this,"play"):this.video.play(a)};d.Video.prototype.pause=function(a){this.ytVideo?this.video.pauseVideo?this.video.pauseVideo():A(this,"pause"):this.video.pause(a)};d.Video.prototype.stop=
function(a){var b=this.video;this.ytVideo?b.stopVideo?(0<b.getCurrentTime()&&b.seekTo(0),b.stopVideo()):A(this,"stop"):(0<b.currentTime&&(b.currentTime=0),"function"===typeof b.stop?b.stop():(this.videoElement.load(),this.pause(a)))};d.Video.prototype.restart=function(a){this.ytVideo?this.video.playVideo?(this.video.seekTo(0),this.play(a)):A(this,"restart"):this.video&&!1===isNaN(this.video.duration)&&(this.video.currentTime=0,this.play(a))};d.Video.prototype.goFullscreen=function(){var a=this;a.isFullscreen()||
D(a.video,null,function(){a.fallbackFullscreen()})};d.Video.prototype.fallbackFullscreen=function(){var a=this;k.FT.$(this.video);var b=function(){a.fullscreenChange(a.isFullscreen)};a.previousState=a.myFT.getState();d.listen(k,"resize",b);a.myFT.once("contract",function(){d.removeListener(k,"resize",b)});a.displayingFallbackFullscreen=!0;a.fullscreenChange(a.isFullscreen);return"expanded"!==a.previousState&&a.myFT.getManifest("expand")?(a.myFT.expand({fullscreen:!0}),!0):!1};d.Video.prototype.isFullscreen=
function(){return B()===this.video||this.video.webkitDisplayingFullscreen||!!this.displayingFallbackFullscreen};d.Video.prototype.fullscreenChange=function(a){var b=this.myFT?this.myFT.videos:{},c=d.$(this.video),e;this.dispatchEvent("fullscreenchange",a);if(a){for(var f in b)b[f]!==this&&N(b[f]);this.displayingFallbackFullscreen?(this.cachedStyles={marginLeft:c[0].style.marginLeft,marginTop:c[0].style.marginTop,left:c[0].style.left,top:c[0].style.top,position:c[0].style.position,width:c[0].style.width,
height:c[0].style.height},c[0].style.marginLeft=0,c[0].style.marginTop=0,c[0].style.position=c[0].style.position||"relative",c[0].style.left=0-c.x()+"px",c[0].style.top=0-c.y()+"px",c[0].style.height=this.myFT.getMaxSize().height+"px",c[0].style.width=this.myFT.getMaxSize().width+"px"):(this.cachedStyles={backgroundColor:"black"!==this.video.style.backgroundColor?this.video.style.backgroundColor:this.cachedStyles.backgroundColor||""},this.video.style.backgroundColor="black")}else for(e in this.cachedStyles)this.video.style[e]=
this.cachedStyles[e]||""};d.Video.prototype.leaveFullscreen=function(){this.isFullscreen()&&!this.displayingFallbackFullscreen?this.video.exitFullScreen?this.video.exitFullscreen():this.video.msExitFullscreen?this.video.msExitFullscreen():this.video.mozExitFullScreen?this.video.mozExitFullScreen():this.video.webkitExitFullscreen?this.video.webkitExitFullscreen():document.cancelFullscreen?document.cancelFullscreen():document.msCancelFullscreen?document.msCancelFullscreen():document.mozCancelFullScreen?
document.mozCancelFullScreen():document.webkitCancelFullscreen?document.webkitCancelFullscreen():document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozExitFullScreen?document.mozExitFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():this.displayingFallbackFullscreen&&("default"===this.previousState?this.myFT.contract():"resized"===this.previousState&&this.myFT.expand(),this.displayingFallbackFullscreen=!1)};d.Video.prototype.mute=
function(a){this.savedVolume=0<this.video.volume?this.video.volume:this.savedVolume||1;this.video.volume=0;this.video.muted=!0;this.ytVideo&&this.video.mute()};d.Video.prototype.unmute=function(){this.video.muted=!1;this.video.volume=this.savedVolume||1;this.ytVideo&&this.video.unMute()};d.Video.userInitiatesPlayback=-1;(function(){function a(a){!f.parentNode||a&&!f.currentTime||(d.Video.userInitiatesPlayback=!f.currentTime,document.body.removeChild(f),clearTimeout(e))}var b=navigator.userAgent,c=
/iP(?:hone|ad|od)/.test(b),b=c&&0<b.indexOf("Version");if(!/PhantomJS/.test(navigator.userAgent)&&document.addEventListener){if(c&&!b)return d.Video.userInitiatesPlayback=!0;var e,f=document.createElement("video"),c=document.createElement("source"),b=document.createElement("source");/msie 9/i.test(navigator.userAgent)||(f.autoplay=!0);c.src="data:video/webm;base64,GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAACNxFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggIa7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU1LjQ4LjEwMFdBjUxhdmY1NS40OC4xMDBzpJAvovgexxqSyucVQwYw4Wu/RImIQI9AAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDiDgQEj44OEC+vCAOABAAAAAAAABrCBELqBEB9DtnUBAAAAAAAAl+eBAKO2gQAAgHACAJ0BKhAAEAAARwiFhYiFhIgCAgAMDN2sx+Ng/VP//u0p//8rQ5Hz//3WA//+aDAAo5WBAMgAsQEAARAQABgAGFgv9AAIAACjlYEBkACxAQABEBAAGAAYWC/0AAgAAKOVgQJYALEBAAEQEAAYABhYL/QACAAAo5WBAyAAsQEAARAQABgAGFgv9AAIAAAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw==";
b.src="data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDJpc29tYXZjMQAAAz5tb292AAAAbG12aGQAAAAAzaNacc2jWnEAAV+QAAFfkAABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAGGlvZHMAAAAAEICAgAcAT////3//AAACQ3RyYWsAAABcdGtoZAAAAAHNo1pxzaNacQAAAAEAAAAAAAFfkAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAEAAAABAAAAAAAd9tZGlhAAAAIG1kaGQAAAAAzaNacc2jWnEAAV+QAAFfkFXEAAAAAAAhaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAAAAAAGWbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAABVnN0YmwAAACpc3RzZAAAAAAAAAABAAAAmWF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAEAAQAEgAAABIAAAAAAAAAAEOSlZUL0FWQyBDb2RpbmcAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAxYXZjQwH0AAr/4QAZZ/QACq609NQYBBkAAAMAAQAAAwAKjxImoAEABWjOAa8gAAAAEmNvbHJuY2xjAAYAAQAGAAAAGHN0dHMAAAAAAAAAAQAAAAUAAEZQAAAAKHN0c3oAAAAAAAAAAAAAAAUAAAIqAAAACAAAAAgAAAAIAAAACAAAAChzdHNjAAAAAAAAAAIAAAABAAAABAAAAAEAAAACAAAAAQAAAAEAAAAYc3RjbwAAAAAAAAACAAADYgAABaQAAAAUc3RzcwAAAAAAAAABAAAAAQAAABFzZHRwAAAAAAREREREAAAAb3VkdGEAAABnbWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcgAAAAAAAAAAAAAAAAAAAAA6aWxzdAAAADKpdG9vAAAAKmRhdGEAAAABAAAAAEhhbmRCcmFrZSAwLjkuOCAyMDEyMDcxODAwAAACUm1kYXQAAAHkBgX/4NxF6b3m2Ui3lizYINkj7u94MjY0IC0gY29yZSAxMjAgLSBILjI2NC9NUEVHLTQgQVZDIGNvZGVjIC0gQ29weWxlZnQgMjAwMy0yMDExIC0gaHR0cDovL3d3dy52aWRlb2xhbi5vcmcveDI2NC5odG1sIC0gb3B0aW9uczogY2FiYWM9MCByZWY9MSBkZWJsb2NrPTE6MDowIGFuYWx5c2U9MHgxOjAgbWU9ZXNhIHN1Ym1lPTkgcHN5PTAgbWl4ZWRfcmVmPTAgbWVfcmFuZ2U9NCBjaHJvbWFfbWU9MSB0cmVsbGlzPTAgOHg4ZGN0PTAgY3FtPTAgZGVhZHpvbmU9MjEsMTEgZmFzdF9wc2tpcD0wIGNocm9tYV9xcF9vZmZzZXQ9MCB0aHJlYWRzPTYgc2xpY2VkX3RocmVhZHM9MCBucj0wIGRlY2ltYXRlPTEgaW50ZXJsYWNlZD0wIGJsdXJheV9jb21wYXQ9MCBjb25zdHJhaW5lZF9pbnRyYT0wIGJmcmFtZXM9MCB3ZWlnaHRwPTAga2V5aW50PTUwIGtleWludF9taW49NSBzY2VuZWN1dD00MCBpbnRyYV9yZWZyZXNoPTAgcmM9Y3FwIG1idHJlZT0wIHFwPTAAgAAAAD5liISscR8A+E4ACAACFoAAITAAAgsAAPgYCoKgoC+L4vi+KAvi+L4YfAEAACMzgABF9AAEUGUgABDJiXnf4AAAAARBmiKUAAAABEGaQpQAAAAEQZpilAAAAARBmoKU";
f.style.cssText="position: absolute; width: 0; height: 0;";e=setTimeout(a,400);f.addEventListener("timeupdate",a);document.body.appendChild(f);f.appendChild(c);f.appendChild(b)}})();d.Video.prototype.loadVid=function(){function a(){g.appendChild(h);g.appendChild(n);g.load()}function b(){var f=d.Video.userInitiatesPlayback;if(-1===f&&1E3>+new Date-c)return setTimeout(b,100);if(!0!==f)return a();d.require(["canvasvideo"],function(){e.canvasVideo=new d.CanvasVideo(e)})}var c=+new Date,e=this,f=this.myFT,
g=e.video,h=document.createElement("source"),n=document.createElement("source"),m=f.get("adPreview"),f=m&&f.get("ftURLMap").videoBaseURL||f.get("ftServeDom")||f.get("tiaServeDom")||"",l=(e.filepath||"").replace(/^http:(?:\/\/video\.flashtalking\.com\/)?/i,"");m?(m=document.createElement("a"),m.href=/^(https?:|\/)/.test(l)?l:"/"+l,l="//"+(f.replace(/^(https?:)?\/\//,"")||m.host)+(/^\//.test(m.pathname)?m.pathname:"/"+m.pathname)+m.search):/^(?:https?:)?\/\//i.test(l)||(l=("https:"===location.protocol?
"https:":"http:")+"//cdn.flashtalking.com"+(/^\//.test(l)?l:"/"+l));h.src=l+".mp4";h.type="video/mp4";n.src=l+".webm";n.type="video/webm";e.settings.forceAutoplay&&g.autoplay&&k.ArrayBuffer&&Function.prototype.bind?b():a()};d.Video.prototype.switchVideo=function(a){var b,c=this.video;b=this.myFT.getManifest("videos");for(var d=b.length,f=!1;d--;)if(b[d].name===a){f=!0;break}if(f){this.settings.muted=c.isMuted?c.isMuted():c.muted;this.pause();if(b=this.container.querySelector("iframe, canvas"))c.destroy?
c.destroy():this.container.removeChild(b),this.container.insertBefore(this.videoElement,this.container.firstChild);this.video=c=this.videoElement;this.video.style.left="";this.video.style.position="";delete this.filepath;delete this.ytVideo;delete this.canvasVideo;c&&(c.innerHTML="",c.autoplay=this.settings.autoplay,c.muted=this.settings.muted);this.settings.video=a;C(this)}else this.myFT.error("switchVideo","Invalid video "+a)};d.Video.prototype.loadYouTubeVid=function(a,b,c){function e(a){0===n||
0===m?setTimeout(function(){p.width=h.settings.parent.offsetWidth;p.height=h.settings.parent.offsetHeight;h.video=new k.YT.Player(a,p);h.video.muted=h.settings.muted},200):(h.video=new k.YT.Player(a,p),h.muted=h.settings.muted)}function f(a){var b=function(){};"function"===typeof k.onYouTubeIframeAPIReady&&(b=k.onYouTubeIframeAPIReady);k.onYouTubeIframeAPIReady=function(){b();e(a)};d.include(("https:"===location.protocol?"https":"http")+"://www.youtube.com/iframe_api")}function g(a){"undefined"!==
typeof k.YT&&"undefined"!==typeof k.YT.Player?e(a):f(a)}var h=this,n="",m="",l=this.container,q=this.filepath;a=function(){var a=/(?:v=|\.be\/)(.*)/.exec(q);""===a||null===a?(myFT.error("insertVideo","No youtube ID detected"),a=""):a=a[1];return a}();n=b.width?b.width:h.settings.parent.offsetWidth;m=b.height?b.height:h.settings.parent.offsetHeight;this.ytVideo=!0;var n=b.width?b.width:h.settings.parent.offsetWidth,m=b.height?b.height:h.settings.parent.offsetHeight,p={height:m,width:n,videoId:a,muted:h.settings.muted,
playerVars:{rel:"0",enablejsapi:"1",controls:!0===h.settings.controls?"1":"0",origin:null===k.location.origin?"":k.location.origin,showinfo:"0",wmode:"transparent"},events:{onReady:function(a){h.muted?h.mute():h.unmute();h.settings.autoplay&&h.play();a=h;for(var b,c=a.settings.actionQueue||[];b=c.shift();)a[b]()},onStateChange:function(a){var b=a.target;a=["ended","play","pause"][a.data];var c=function(a){var b=document.createEvent("CustomEvent");b.initCustomEvent(a,!1,!1,null);l.dispatchEvent(b)};
"ended"===a?(c("timeupdate"),h.settings.loop&&h.restart()):"play"===a&&b.getIframe&&setTimeout(function r(){c("timeupdate");1===b.getPlayerState()&&setTimeout(r,300)},500);a&&c(a)}}};""!==a&&g(this.video)};d.prototype.videos={};d.prototype.insertVideo=function(a){var b,c=this,e="",f=document.createElement("video"),g=document.createElement("div"),h;if(a)if(a.video)if(a.parent)if("object"!==typeof a.parent)c.error("insertVideo","The parent, defined in the settings argument, should be an HTML Div Element");
else{if(f.canPlayType||/phantomjs/i.test(navigator.userAgent)){f.addEventListener("timeupdate",function(){},!0);b=function(){};b.prototype=P;b=new b;a.parent=0<a.parent.length?a.parent[0]:a.parent;a.controlsParent=a.controlsParent&&0<a.controlsParent.length?a.controlsParent[0]:a.controlsParent;for(h in a)b[h]=a[h];g.className="ft-video";g.setAttribute("data-ft-video",a.video);b.parent.appendChild(g);g.appendChild(f);b.width&&(e+="width:"+b.width+"px;");b.height&&(e+="height:"+b.height+"px;");e&&d.styleSheet.insertRule('[data-ft-video="'+
a.video+'"] {'+e+"}",d.styleSheet.cssRules.length);a.clickTag?f.addEventListener("click",function(b){b.stopPropagation&&b.stopPropagation();c.clickManager(b);c.clickTag("true"===a.clickTag.toString()?0:a.clickTag)}):f.addEventListener("click",function(a){a.stopPropagation&&a.stopPropagation();c.clickManager(a)});for(h in b)try{b[h]&&!/^(?:video|clicktag|parent|controlsParent|forceAutoplay)$/i.test(h)&&(f.setAttribute(h,b[h]),"muted"===h&&b[h]&&(f.muted=!0))}catch(k){}f.controls=!1;return c.applyVideo(f,
b)}c.dispatchEvent("videofail")}else c.error("insertVideo","There was no parent element defined in the settings argument");else c.error("insertVideo","The settings argument did not contain a video name for referencing against the manifest or it was falsey");else c.error("insertVideo","No settings object was passed to the insertVideo method")};d.prototype.applyVideo=function(a,b){var c=this,e=b.video,f=new d.Video(c,b);f.video=f.videoElement=a;f.container=f.video.parentNode;C(f);(a.parentNode||a).addEventListener("canplay",
function(){f.dispatchEvent("playbackready")},!0);c.getManifest("filename")?c.registerVideo(f):d.addEventListener("manifest",function(){c.registerVideo(f)});return c.videos[e]=f};d.prototype.registerVideo=function(a){var b=this,c={},d=a.settings,f=a.container,g=function(){var a=d.video,c=b.getManifest("videos"),f=c.length;if(f){for(;f--;)if(a===c[f].name)return f+1;return"No matching video name in the manifest's Video array"}return"No videos included in the manifest's Video array"},h,k=function(a){a=
c[d.video];a||(h=void 0,c[d.video]=a={lastPercentage:0});a.hasPlayed||(l("init"),a.hasPlayed=!0);a.hasPlayedThrough&&!a.hasReplayed&&(l("replay"),a.hasReplayed=!0)},m=function(b){var f,g=a.video,k=c[d.video];k||(c[d.video]=k={lastPercentage:0});"undefined"===typeof k.stage&&(k.stage=0);b&&b.detail&&b.detail.cvPlayRatio?b=100*b.detail.cvPlayRatio:"function"===typeof g.getCurrentTime?(ytVideo=!0,f=g.getDuration(),b=Math.round(g.getCurrentTime())/Math.floor(f)*100):(f=g.duration,b=Math.round(g.currentTime)/
Math.floor(f)*100);h=Math.floor(10*f);if(0!==b){switch(k.stage){case 0:l("starts");a.hasPlayed=!0;k.stage++;break;case 1:25<=b&&(l("25%"),k.stage++);break;case 2:50<=b&&(l("50%"),k.stage++);break;case 3:75<=b&&(l("75%"),k.stage++);break;case 4:100<=b&&(l("100%"),a.hasPlayedThrough=!0,k.hasPlayedThrough=!0,k.stage++)}100>k.lastPercentage&&100<=b&&a.dispatchEvent("ended");k.lastPercentage=b}},l=function(c){var f=g();b.send("tracker",{type:"video",id:f,event:c,duration:h});b.dispatchEvent("video",{video:d.video,
id:f,event:c});a.dispatchEvent("tracker",{duration:h,event:c})};"number"===typeof g()?a.video&&(f.addEventListener("play",k,!0),f.addEventListener("timeupdate",m,!0)):b.error("registerVideo",g())};d.makeDispatcher(d);k.FT=d})(window);
